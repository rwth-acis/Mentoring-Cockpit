<!doctype html>  
<head>  
 
    <!-- username and password encryption (not needed for the test)
        from github.com/adlnet/xAPIWrapper -->
    <script type="text/javascript" src="cryptojs_v3.1.2.js"></script>

    <!-- "xAPI magic" from github.com/adlnet/xAPIWrapper -->
    <script type="text/javascript" src="xapiwrapper.js"></script>

    <!-- mobsos mysql connect and json parser -->
    <script type="text/javascript" src="moodledata.js"></script>
      
    <script>  
    function send_statement(){  
        var conf = {
            
            //xAPI endpoint for the LRS
            //for the test its the local address of my HelloWorld Learning Locker
            "endpoint" : "http://137.226.232.175:32654/data/xAPI/",  
            
            // (Key:Secret) of the API client for the store
            // In Learning Locker: 1. Go to setting; 2. create a store; 3. create a client; 4. copy key and secret
            "auth" : "Basic " + toBase64("6f6b29e72cbe124252cb47a0c011706b7638a960:73f0c24ba43e2484931bcf9606e9638caebac963")
        };  
  
        ADL.XAPIWrapper.changeConfig(conf);

        getEverything(function (err, everythingArr) {
            if(err) console.log("Error");
            for(var i = 0; i < everythingArr.length; i++) {
                var userData = everythingArr[i];
                //todo
            }

        });
           
        //define the xapi statement being sent  
        var statement = {  
            "actor": {  
                "mbox": "mailto:hello@world.com",  
                "name": "Somebody",  
                "objectType": "Agent"  
            },  
            "verb": {  
                "id": "http://example.com/xapi/interacted",  
                "display": {"en-US": "pressed"}  
            },  
            "object": {  
                "id": "http://example.com/button_example",  
                "definition": {  
                    "name": {"en-US": "the Button"},  
                    "description": {"en-US": "Example xAPI Button"}  
                },  
                "objectType": "Activity"  
            }  
        }; //end statement definition  
   
        // Dispatch the statement to the LRS  
        var result = ADL.XAPIWrapper.sendStatement(statement);  
        }  
    </script>  
  
</head>  
  
<body>  
    <button type="button" onclick="send_statement()">Send xAPI Statements</button>  
</body>
</html>